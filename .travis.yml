os:
  linux
language:
  python
python:
  - 3.7

install:
  - pip install django
  - pip install gunicorn
  - pip install coverage
  - pip install nose

script:
  - nosetests --with-cov --cov-config .coveragerc

after_success:
  - codecov

jobs:
  include:
    - stage: Deploy
      script: skip
      deploy:
        provider: heroku
        api_key:
          secure: $herokuapikey
        app: lauragoossens
        on:
          repo: studioj/lauragoossensgent